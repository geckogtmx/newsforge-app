{
  "query": "-- Add columns to newsSources table\nALTER TABLE newsSources \nADD COLUMN lastFetchedAt timestamp NULL,\nADD COLUMN selectionRate int DEFAULT 0,\nADD COLUMN finalRate int DEFAULT 0,\nADD COLUMN userRating int DEFAULT 0,\nADD COLUMN qualityScore int DEFAULT 50,\nADD COLUMN totalHeadlines int DEFAULT 0,\nADD COLUMN selectedHeadlines int DEFAULT 0,\nADD COLUMN finalHeadlines int DEFAULT 0;\n\n-- Add columns to runs table\nALTER TABLE runs\nADD COLUMN isIncremental boolean NOT NULL DEFAULT false;\n\n-- Add columns to rawHeadlines table\nALTER TABLE rawHeadlines\nADD COLUMN deduplicationGroupId varchar(64) NULL,\nADD COLUMN heatScore int DEFAULT 1,\nADD COLUMN isBestVersion boolean DEFAULT false,\nADD COLUMN matchedKeywords json NULL;\n\n-- Add columns to userSettings table\nALTER TABLE userSettings\nADD COLUMN monthlyBudget int DEFAULT 0,\nADD COLUMN currentMonthSpend int DEFAULT 0,\nADD COLUMN lastBudgetReset timestamp DEFAULT CURRENT_TIMESTAMP,\nADD COLUMN defaultIncrementalMode boolean DEFAULT true;\n\n-- Create keywordAlerts table\nCREATE TABLE IF NOT EXISTS keywordAlerts (\n  id varchar(64) NOT NULL PRIMARY KEY,\n  userId int NOT NULL,\n  keyword varchar(255) NOT NULL,\n  isActive boolean NOT NULL DEFAULT true,\n  notifyDesktop boolean NOT NULL DEFAULT true,\n  autoTag boolean NOT NULL DEFAULT true,\n  matchCount int DEFAULT 0,\n  createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create headlineEmbeddings table\nCREATE TABLE IF NOT EXISTS headlineEmbeddings (\n  id int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  headlineId int NOT NULL,\n  embedding json NOT NULL,\n  createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3xKTS3Fn9noGSWk.root --database GBXpKwZYcju3ds6RsgiHLS --execute -- Add columns to newsSources table\nALTER TABLE newsSources \nADD COLUMN lastFetchedAt timestamp NULL,\nADD COLUMN selectionRate int DEFAULT 0,\nADD COLUMN finalRate int DEFAULT 0,\nADD COLUMN userRating int DEFAULT 0,\nADD COLUMN qualityScore int DEFAULT 50,\nADD COLUMN totalHeadlines int DEFAULT 0,\nADD COLUMN selectedHeadlines int DEFAULT 0,\nADD COLUMN finalHeadlines int DEFAULT 0;\n\n-- Add columns to runs table\nALTER TABLE runs\nADD COLUMN isIncremental boolean NOT NULL DEFAULT false;\n\n-- Add columns to rawHeadlines table\nALTER TABLE rawHeadlines\nADD COLUMN deduplicationGroupId varchar(64) NULL,\nADD COLUMN heatScore int DEFAULT 1,\nADD COLUMN isBestVersion boolean DEFAULT false,\nADD COLUMN matchedKeywords json NULL;\n\n-- Add columns to userSettings table\nALTER TABLE userSettings\nADD COLUMN monthlyBudget int DEFAULT 0,\nADD COLUMN currentMonthSpend int DEFAULT 0,\nADD COLUMN lastBudgetReset timestamp DEFAULT CURRENT_TIMESTAMP,\nADD COLUMN defaultIncrementalMode boolean DEFAULT true;\n\n-- Create keywordAlerts table\nCREATE TABLE IF NOT EXISTS keywordAlerts (\n  id varchar(64) NOT NULL PRIMARY KEY,\n  userId int NOT NULL,\n  keyword varchar(255) NOT NULL,\n  isActive boolean NOT NULL DEFAULT true,\n  notifyDesktop boolean NOT NULL DEFAULT true,\n  autoTag boolean NOT NULL DEFAULT true,\n  matchCount int DEFAULT 0,\n  createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  updatedAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Create headlineEmbeddings table\nCREATE TABLE IF NOT EXISTS headlineEmbeddings (\n  id int AUTO_INCREMENT NOT NULL PRIMARY KEY,\n  headlineId int NOT NULL,\n  embedding json NOT NULL,\n  createdAt timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP\n);",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 5283
}